<!DOCTYPE html> <html> <head> </head> <body> <div> <input type="radio" id="RGB" name="ColorMode" value="RGB" checked /> <label for="RGB">RGB</label> <input type="radio" id="greyscale" name="ColorMode" value="greyscale" /> <label for="greyscale">Greyscale</label> <input type="radio" id="imagePallet" name="ColorMode" value="imagePallet" /> <label for="imagePallet">Image</label> </div> <br> <div> <div id="RGBbits"> Bits:<br> <input type="checkbox" id="sync" name="sync" checked /> <label for="sync">Synchronize Values</label> <br> <div style="font-family: monospace; font-size: 18pt; display: inline-block;" id="rValue">2</div> <input type="range" id="r" min="1" max="3" /> <label for="r">Red</label> <br> <div style="font-family: monospace; font-size: 18pt; display: inline-block;" id="gValue">2</div> <input type="range" id="g" min="1" max="3" /> <label for="g">Green</label> <br> <div style="font-family: monospace; font-size: 18pt; display: inline-block;" id="bValue">2</div> <input type="range" id="b" min="1" max="3" /> <label for="b">Blue</label> </div> <div id="greyscaleBits"> Bits:<br> <div style="font-family: monospace; font-size: 18pt; display: inline-block;" id="greyscaleValue">5</div> <input type="range" id="gs" min="1" max="8" /> </div> <div id="imageBits"> <script src="http://leeoniya.github.io/RgbQuant.js/src/rgbquant.js"></script> <input type="file" id="f" accept="image/*"></input><br><br> <img id="image" alt="No image found" width=110><br> Bits:<br> <div style="font-family: monospace; font-size: 18pt; display: inline-block;" id="pv">5</div> <input type="range" id="ps" min="1" max="8" /> <script> function updateImagePallet(c){ var opts = {colors: c}; var q = new RgbQuant(opts); q.sample(img); cout.clear(); pallet = q.palette(true); if(pallet.length > 256){ var opts = {colors: Math.pow(2, p.value)}; var q = new RgbQuant(opts); q.sample(img); cout.clear(); pallet = q.palette(true); } cout.print("["); for(var i = 0; i < pallet.length; i++){ cout.print('{"hex":"' + rgbToHex(pallet[i][0], pallet[i][1], pallet[i][2]) + '"}'); if(i != pallet.length-1){ cout.print(","); } } cout.print("]"); } </script> </div> </div> <textarea id="cout" cols="48" rows="16"></textarea> <script> cout={t:document.getElementById("cout"),o:"n",print:e=>{cout.t.innerHTML+=e},u:e=>{cout.t.innerHTML+=e+cout.o},clear:()=>{cout.t.innerHTML=""},hide:()=>{cout.t.style="display: none"},show:()=>{cout.t.style="outline: solid"}};input=document.getElementById("f");input.addEventListener("change",updateImage);img=document.getElementById("image");function updateImage(e){delete img.width;if(input.files[0].size<1e7){img.alt="No image found";ObjectURL=URL.createObjectURL(input.files[0]);img.src=ObjectURL;OGwidth=img.naturalWidth;img.addEventListener("load",()=>{updateImagePallet(e)})}}r=document.getElementById("r");rv=document.getElementById("rValue");g=document.getElementById("g");gv=document.getElementById("gValue");b=document.getElementById("b");bv=document.getElementById("bValue");sync=document.getElementById("sync");m=document.getElementById("gs");mv=document.getElementById("greyscaleValue");p=document.getElementById("ps");pv=document.getElementById("pv");sliders=[r,g,b,m,p];sliderValues=[rv,gv,bv,mv,pv];function sliderChange(e){var t=sliders[["r","g","b","m","p"].indexOf(e)];if(sync.checked&&e!="m"&&e!="p"){rv.innerHTML=t.value;gv.innerHTML=t.value;bv.innerHTML=t.value;r.value=t.value;g.value=t.value;b.value=t.value}else{sliderValues[["r","g","b","m","p"].indexOf(e)].innerHTML=t.value}update()}function componentToHex(e){var t=e.toString(16);return t.length==1?"0"+t:t}function rgbToHex(e,t,n){return"#"+componentToHex(e)+componentToHex(t)+componentToHex(n)}r.addEventListener("input",()=>{sliderChange("r")});g.addEventListener("input",()=>{sliderChange("g")});b.addEventListener("input",()=>{sliderChange("b")});m.addEventListener("input",()=>{sliderChange("m")});p.addEventListener("input",()=>{sliderChange("p")});document.getElementById("RGB").addEventListener("click",()=>{update()});document.getElementById("greyscale").addEventListener("click",()=>{update()});document.getElementById("imagePallet").addEventListener("click",()=>{update()});function update(){if(document.getElementById("RGB").checked){document.getElementById("RGBbits").style="";document.getElementById("greyscaleBits").style="display: none";document.getElementById("imageBits").style="display: none";cout.clear();cout.print("[");var e=Math.pow(2,r.value);var t=Math.pow(2,g.value);var n=Math.pow(2,b.value);for(var o=0;o<e;o++){for(var u=0;u<t;u++){for(var c=0;c<n;c++){cout.print('{"hex":"');var a=Math.ceil(o/(e-1)*255);var i=Math.ceil(u/(t-1)*255);var d=Math.ceil(c/(n-1)*255);cout.print(rgbToHex(a,i,d));cout.print('"}');if(!(o==e-1&&u==t-1&&c==n-1)){cout.print(",")}}}}cout.print("]")}else if(document.getElementById("greyscale").checked){document.getElementById("RGBbits").style="display: none";document.getElementById("greyscaleBits").style="";document.getElementById("imageBits").style="display: none";cout.clear();cout.print("[");var l=Math.pow(2,m.value);for(var o=0;o<l;o++){cout.print('{"hex":"');var s=Math.ceil(o/(l-1)*255);cout.print(rgbToHex(s,s,s));cout.print('"}');if(o!=l-1){cout.print(",")}}cout.print("]")}else{document.getElementById("RGBbits").style="display: none";document.getElementById("greyscaleBits").style="display: none";document.getElementById("imageBits").style="";cout.clear();updateImage(Math.pow(2,p.value))}}update(); </script> <br><a href="https://cvws.icloud-content.com/B/AdWtaT3FvHTpfx2Or52dqO2ZE7RdAZZwxK18VoI4LXl_Ln89krOWHeSp/DitherItPallet.html?o=AjktNRKQsH3hTTvGbWEoIMFB4waLh7MtSeEQzNMU40Rk&v=1&x=3&a=CAogN2s68dQLGzjoM6X_fa-G8_UbOuUhh5kqYqAcHr-8O5oSbxCDoLHA5jEYg7CslPAxIgEAUgSZE7RdWgSWHeSpaict-gl-abblwsULAWhnhz31RRGl9ezq2INN6IpRKbzc-5CyfhP8u49yJ3D-GXh4ZefB39O5cQsLXDuZn-SUJRsx00Ifoe92hoxVQShQ9L_TWw&e=1713734621&fl=&r=3908EF99-80EE-4B5B-92F0-C52DE33014AF-1&k=jmH24tHCaK6RlevgbycFrQ&ckc=com.apple.clouddocs&ckz=com.apple.CloudDocs&p=47&s=UUjGq4y7H8OU2N_No_ZrTl5rTto">Source Code</a> </body> </html>
